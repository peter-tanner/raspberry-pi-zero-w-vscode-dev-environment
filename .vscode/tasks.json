{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "start-debugging",
      "type": "shell",
      "dependsOn": ["sync-workspace", "start-debugging-nowait"],
      "command": "sleep",
      "args": ["0"]
    },
    {
      "label": "start-debugging-nowait",
      "type": "shell",
      "dependsOn": ["sync-workspace"],
      "command": "ssh.exe",
      "args": [
        "${config:ws_rpi_user}@${config:ws_rpi_address}",
        "sudo pkill python3; cd ${config:ws_rpi_remote_path}; nohup python3 -m debugpy --wait-for-client --listen 0.0.0.0:${config:ws_rpi_debug_port} \"${config:ws_rpi_entrypoint_file}\" 2&> /dev/null < /dev/null &"
      ],
      "problemMatcher": []
    },
    {
      "label": "stop-debugging",
      "type": "shell",
      "command": "ssh.exe",
      "args": [
        "${config:ws_rpi_user}@${config:ws_rpi_address}",
        "sudo pkill python3"
      ],
      "problemMatcher": []
    },
    {
      "label": "sync-workspace",
      "type": "shell",
      "command": "robocopy",
      "args": [
        "${workspaceFolder}",
        "${config:ws_rpi_sync_path}",
        "/MIR",
        "/XD",
        ".vscode",
        ".venv",
        ".git",
        "/R:3",
        "/W:5"
      ]
    }
  ]
}
